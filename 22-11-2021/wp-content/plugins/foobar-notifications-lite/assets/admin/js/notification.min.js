"use strict";!function(e,s){e.ready(function(l){var e,a=(e="foobar_notification-settings",window.FOOBAR_TYPES&&s.object(FOOBAR_TYPES)&&FOOBAR_TYPES.hasOwnProperty(e)?FOOBAR_TYPES[e]:{}),c=Object.keys(a);l("#foobar_notification-types_type-field input:radio").change(function(e){e.preventDefault();var t,n,o,i=l(this).val();-1!==c.indexOf(i)&&(t=a[i],s.object(t)&&s.string(t.container)&&((n=FooFields.container(t.container))instanceof FooFields.Container&&(o=t.defaults,s.object(o)&&Object.keys(o).forEach(function(e){var t=n.field(e);t instanceof FooFields.Field&&t.val(o[e])}),c.forEach(function(e){var t,o=a[e].content;s.string(o)&&(t=e===i,n.toggle(o,t),t&&n.activate(o))})))),l("#foobar_notification-settings").show()}),l(".foobar-shortcode").click(function(){try{this.select(),document.execCommand("copy"),l(this).siblings(".foobar-shortcode-message").show()}catch(e){console.log("Oops, unable to copy!")}}),l(".foobar-admin-preview").click(function(e){e.preventDefault();var t=l(this),o=t.parents("tr:first"),n=t.data("foobar-id"),i=t.data("foobar-uid"),a={action:"foobar_admin_preview",id:n,_wpnonce:t.data("foobar-preview-nonce"),_wp_http_referer:encodeURIComponent(l('input[name="_wp_http_referer"]').val())};o.addClass("foobar-preview-loading"),l.ajax({type:"POST",url:ajaxurl,data:a,cache:!1,success:function(e){FooBar.dismissAll(!0),l("body").append(e);var t=FooBar.create(i);t instanceof FooBar.Bar&&t.init()}}).always(function(){o.removeClass("foobar-preview-loading")})})})}((FooBar,FooBar.utils),FooBar.utils.is),function(l,e,c,s){e.IconPicker=e.Field.extend({construct:function(e,t,o,n,i){var a=this;a._super(e,t,o,n,i),a.$doc=l(document),a.initial=a.$value.val(),a.hasDefault=!s.empty(a.opt.default),a.$container=l("<div/>",{class:a.cls.container}),a.containerElement=a.$container.get(0),a.$button=l("<button/>",{class:"button "+a.cls.button,type:"button"}),a.$clear=l("<button/>",{class:"button button-small "+a.cls.clear,type:"button",text:a.hasDefault?a.i18n.default:a.i18n.clear}),a.$icon=l("<span/>",{class:a.cls.icon}),a.$text=l("<span/>",{class:a.cls.text,text:a.i18n.select}),a.$list=l("<div/>",{class:a.cls.list}),a.$selected=l(),a.icons=c.icons.all()},setup:function(){var e=this;s.empty(e.icons)||(e.$container.append(e.$button.append(e.$icon,e.$text),e.$clear,e.$list.append(e.createItems())),e.$button.on("click",{self:e},e.onButtonClick),e.$clear.on("click",{self:e},e.onClearClick),e.$list.on("click",e.sel.item,{self:e},e.onItemClick),e.$value.addClass(e.cls.hidden).after(e.$container),e.val(e.$value.val()))},createItems:function(){var t=this;return Object.keys(t.icons).map(function(e){return l("<button/>",{class:t.cls.item,title:e,type:"button"}).append(t.icons[e].cloneNode(!0))})},teardown:function(){},val:function(e){var t=this;if(s.undef(e))return t.$value.val();var o=t.$value.val(),n="";s.string(e)&&t.icons.hasOwnProperty(e)?(n=e,t.$selected=t.$list.find('[title="'+n+'"]'),t.$value.val(n),t.$icon.empty().append(t.icons[n].cloneNode(!0))):(t.$selected=l(),t.$value.val(n),t.$icon.empty()),t.$list.find(t.sel.selected).removeClass(t.cls.selected),t.$selected.addClass(t.cls.selected),o!==n&&t.doValueChanged()},toggleDropdown:function(e){var t,o,n=this;n.dropdownVisible=s.boolean(e)?e:!n.dropdownVisible,n.dropdownVisible?(n.$container.addClass(n.cls.visible),t=n.$list.get(0),0!==n.$selected.length?(o=n.$selected.get(0),t.scrollTo(0,o.offsetTop)):t.scrollTo(0,0),n.$doc.on("click",{self:n},n.onDocumentClick)):(n.$doc.off("click",n.onDocumentClick),n.$container.removeClass(n.cls.visible))},onDocumentClick:function(e){var t=e.data.self;l.contains(t.containerElement,e.target)||t.toggleDropdown(!1)},onButtonClick:function(e){e.preventDefault(),e.data.self.toggleDropdown()},onClearClick:function(e){e.preventDefault();var t=e.data.self;t.val(t.hasDefault?t.opt.default:"")},onItemClick:function(e){e.data.self.val(this.title)}}),e.fields.register("icon-picker",e.IconPicker,".foofields-type-icon-picker",{default:null},{container:"fip-container",button:"fip-button",clear:"fip-clear",icon:"fip-icon",text:"fip-text",list:"fip-list",item:"fip-item",hidden:"fip-hidden",visible:"fip-visible",selected:"fip-selected",sr:"fip-sr"},{select:"Select Icon",clear:"Clear",default:"Default"})}(FooFields.$,FooFields,FooBar,(FooFields.utils,FooFields.utils.is));